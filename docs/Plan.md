# План автоматизации

#### Объект тестирования

Веб-сервис оплаты путешествий:
* оплата банковской картой
* оплата в кредит с выдачей по реквизитам банковской карты

#### Валидные данные предоставленных тестовых карт
* Номер разрешённой карты: 4444 4444 4444 4441
* Номер запрещённой карты: 4444 4444 4444 4442
* Месяц: двузначное число в диапазоне от 01 до 12
* Год: больше текущего на два, в формате двузначного числа
* Владелец: Имя и Фамилия латиницей
* CVC: Трёхзначное число в диапазоне 000 до 999

## Перечень автоматизируемых сценариев

1. Купить. Успешная оплата разрешённой картой
    * Выбрать "Купить"
    * Заполнить данные разрешённой карты
    * Нажать "Продолжить"
    * Ожидаемый результат: уведомление "Успешно". В БД статус операции: "APPROVED"

1. Купить. Отказ в оплате запрещённой картой
    * Выбрать "Купить"
    * Заполнить данные запрещённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить. Отказ в оплате картой не зарегестрированой в системе
    * Выбрать "Купить"
    * Заполнить все поля, кроме номера, валидными данными
    * В поле "Номер карты" ввести: 9999 9999 9999 9999
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить. Отказ в оплате картой просроченной на месяц
    * Выбрать "Купить"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести прошедший
    * В поле "Год" ввести текущий год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Месяц" подчёркнуто красным, под полем есть сообщение "Неверно указан срок действия карты"

1. Купить. Отказ в оплате картой просроченной на год
    * Выбрать "Купить"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести текущий
    * В поле "Год" ввести прошлый год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Год" подчёркнуто красным, под полем есть сообщение "Истёк срок действия карты"

1. Купить. Отказ в оплате картой с сроком выдачи больше 5 лет
    * Выбрать "Купить"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести текущий
    * В поле "Год" ввести текущий +6 лет
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Год" подчёркнуто красным, под полем есть сообщение "Неверно указан срок действия карты"
	
1. Купить в кредит. Успешная оплата кредитом с разрешённой картой
    * Выбрать "Купить в кредит"
    * Заполнить данные разрешённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Успешно". В БД статус операции: "APPROVED"

1. Купить в кредит. Отказ в оплате кредитом с запрещённой картой
    * Выбрать "Купить в кредит"
    * Заполнить данные запрещённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить в кредит. Отказ в оплате кредитом картой не зарегестрированой в системе
 Карту, номер которой не существует в системе, считаем равной запрещённой карте
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме номера, валидными данными
    * В поле "Номер карты" ввести: 4444 4444 4444 4444
    * Получить уведомление "Отказано". В БД статус операции: "DECLINED"
   
1. Купить в кредит. Отказ в оплате кредитом картой просроченной на месяц
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести прошедший
    * В поле "Год" ввести текущий год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Месяц" подчёркнуто красным, под полем есть сообщение "Неверно указан срок действия карты"

1. Купить в кредит. Отказ в оплате кредитом картой просроченной на год
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести текущий
    * В поле "Год" ввести прошедший
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Год" подчёркнуто красным, под полем есть сообщение "Истёк срок действия карты"

1. Купить в кредит. Отказ в оплате кредитом картой с сроком выдачи больше 5 лет
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести текущий
    * В поле "Год" ввести текущий +6 лет.
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Поле "Год" подчёркнуто красным, под полем есть сообщение "Неверно указан срок действия карты"

### Перечень используемых инструментов с обоснованием выбора
* JDK 11 - Написание кода тестов
* IntelliJ IDEA - Среда подготовки авто-тестов
* Github - Репозиторий для хранения кода
* Docker - для развертываня контейнеров с базой данных (MySQL и PostgreSQL)
* JUnit 5 - позволяет создавать автоматизированные тесты на java 
* Selenide - для автоматизации UI тестов на java c простым синтаксисом
* Faker - генератор случайных имён владельца карты 
* Lombok - упрощает написание  повторяемого кода на java
* Allure - для создания отчётов тестирования

### Перечень и описание возможных рисков при автоматизации
* Из-за отсутствия и какой-либо документации сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой
* Отсутствие требований к полям формы оплаты
* Реальная система и реальные данные скорее всего будут отличаться от SUT и тестовых данных
* Возможны проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres)

### Интервальная оценка с учётом рисков (в часах)
    * 10 часов на исследование приложения;
    * 5 часов на планирование;
    * 8 часов на настройку тестового окружения;
    * 24 часов на написание основы тестов и утилит;
    * 48 часов на написание самих тестов;
    * 8 часов на тестовый прогон;
    * 24 часов отладку тестов;
    * 24 часов на описание багов и отчёт;  
    * 48 дополнительно на изучение докера и возможных проблем с подключением приложения к БД.
    Итого с учетом рисков: 200

### План сдачи работ
* Подготовка тестового окружения, запуск приложения: 12.11.2022
* Написание автотестов, тестирование: 18.11.2022
* Отладка тестов и описание багов 21.11.2022
* Формирование отчета автоматизации и тестирования: 25.11.2022
